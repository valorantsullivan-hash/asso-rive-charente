<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rive de Charente</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  :root{--p:#ff69b4;--b:#40e0d0;--y:#ffd700;--g:#32cd32;--o:#ffa500}
  *{margin:0;padding:0;box-sizing:border-box}
  body{font-family:Montserrat,sans-serif;background:#fffaf0;color:#333}
  #login{position:fixed;inset:0;background:linear-gradient(135deg,var(--p),var(--b),var(--y));display:flex;align-items:center;justify-content:center;z-index:99}
  .box{background:#fff;padding:40px;border-radius:25px;box-shadow:0 20px 50px rgba(0,0,0,.3);text-align:center;width:90%;max-width:420px}
  .box img{width:260px;margin-bottom:15px}
  h1,h2{font-family:'Fredoka One',cursive;background:linear-gradient(45deg,var(--p),var(--b));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  input,select,button{width:100%;padding:14px;margin:10px 0;border:2px solid #ddd;border-radius:50px;font-size:1rem}
  button{background:linear-gradient(45deg,var(--p),var(--b));color:#fff;border:none;cursor:pointer;font-weight:bold}
  button:hover{transform:scale(1.05)}
  header{background:#fff;padding:15px;box-shadow:0 5px 20px rgba(0,0,0,.1);position:sticky;top:0;z-index:10}
  .header{display:flex;justify-content:space-between;align-items:center;max-width:1300px;margin:auto;padding:0 20px}
  .header img{height:75px}
  .user{background:linear-gradient(45deg,var(--p),var(--b));color:#fff;padding:10px 20px;border-radius:50px;font-weight:bold}
  .container{max-width:1300px;margin:40px auto;padding:0 20px}
  .card{background:#fff;border-radius:20px;padding:30px;margin-bottom:30px;box-shadow:0 10px 30px rgba(0,0,0,.1)}
  table{width:100%;border-collapse:collapse;margin:20px 0}
  th{background:linear-gradient(45deg,var(--p),var(--b));color:#fff;padding:15px}
  td{padding:12px;text-align:center;border-bottom:1px solid #eee}
  tr:hover{background:#fff5fb}
  .btn{width:38px;height:38px;border-radius:50%;border:none;color:#fff;font-size:1.3rem;cursor:pointer}
  .plus{background:var(--g)}
  .minus{background:#e91e63}
  .del{background:#ff4444;color:#fff;padding:8px 12px;border-radius:10px;border:none;cursor:pointer}
  footer{text-align:center;padding:40px;background:linear-gradient(45deg,var(--p),var(--b));color:#fff;font-weight:bold}
  @media(max-width:768px){
    table,thead,tbody,th,td,tr{display:block}
    thead tr{display:none}
    tr{margin-bottom:20px;border:2px solid #ddd;border-radius:15px}
    td{text-align:right;padding-left:50%;position:relative}
    td:before{content:attr(data-label);position:absolute;left:15px;font-weight:bold;color:var(--p)}
  }
</style>
</head>
<body>

<div id="login">
  <div class="box">
    <img src="https://i.ibb.co/7z7Y3nK/rives-de-charente-logo.png" alt="Logo">
    <h1>Rive de Charente</h1>
    <p style="margin:15px 0">Connecte-toi pour gérer les événements</p>
    <select id="user">
      <option value="">Choisis ton prénom</option>
      <option>Marie</option><option>Julien</option><option>Sophie</option><option>Lucas</option><option>Emma</option><option>Antoine</option>
    </select>
    <button onclick="login()">Se connecter</button>
  </div>
</div>

<div id="app" style="display:none">
  <header>
    <div class="header">
      <img src="https://i.ibb.co/7z7Y3nK/rives-de-charente-logo.png" alt="Logo">
      <div class="user">Connecté·e : <span id="name"></span> • <a href="#" onclick="logout()" style="color:#fff;text-decoration:underline">Déconnexion</a></div>
    </div>
  </header>

  <div class="container">
    <div class="card">
      <h1>Bonjour <span id="welcome"></span> !</h1>
      <p style="text-align:center;margin:15px 0">Gérez les événements de l'association</p>
    </div>

    <div class="card">
      <h2>Ajouter un événement</h2>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px">
        <input id="date" placeholder="Date & heure (ex: Lundi 15 déc – 14h)">
        <input id="lieu" placeholder="Lieu">
        <input id="desc" placeholder="Description">
        <input id="taches" placeholder="Tâches (virgule)">
        <button onclick="add()">Ajouter</button>
      </div>
    </div>

    <div class="card">
      <h2>Événements en cours</h2>
      <table id="table">
        <thead><tr>
          <th>Date</th><th>Lieu</th><th>Événement</th>
          <th>Participants</th><th>Bénévoles</th><th>Tâches</th><th></th>
        </tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <footer>© 2025 Rive de Charente • Fait avec amour par les bénévoles</footer>
</div>

<script>
const logo = "https://i.ibb.co/7z7Y3nK/rives-de-charente-logo.png";
let user = "", data = JSON.parse(localStorage.getItem("rdc")) || {events:[]};

function login(){
  let sel = document.getElementById("user");
  user = sel.value.trim() || prompt("Ton prénom ?");
  if(!user) return;
  document.getElementById("login").style.display="none";
  document.getElementById("app").style.display="block";
  document.getElementById("name").textContent = document.getElementById("welcome").textContent = user;
  render();
}

function logout(){ location.reload(); }

function save(){ localStorage.setItem("rdc", JSON.stringify(data)); }

function render(){
  const tbody = document.querySelector("#table tbody");
  tbody.innerHTML = "";
  data.events.forEach((e,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td data-label="Date">${e.date}</td>
      <td data-label="Lieu">${e.lieu}</td>
      <td data-label="Événement">${e.desc}</td>
      <td data-label="Participants">
        <button class="btn minus" onclick="upd(${i},'p',-1)">–</button>
        <span>${e.p}</span>
        <button class="btn plus" onclick="upd(${i},'p',1)">+</button>
      </td>
      <td data-label="Bénévoles">
        <button class="btn minus" onclick="upd(${i},'b',-1)">–</button>
        <span>${e.b}</span>
        <button class="btn plus" onclick="upd(${i},'b',1)">+</button>
      </td>
      <td data-label="Tâches">${e.t}</td>
      <td><button class="del" onclick="del(${i})">Supprimer</button></td>
    `;
    tbody.appendChild(tr);
  });
}

function add(){
  const d=document.getElementById("date").value, l=document.getElementById("lieu").value,
        s=document.getElementById("desc").value, t=document.getElementById("taches").value||"À définir";
  if(!d||!l||!s) return alert("Remplis date, lieu et description !");
  data.events.push({date:d,lieu:l,desc:s,p:0,b:0,t});
  save(); render();
  document.querySelectorAll("#date,#lieu,#desc,#taches").forEach(i=>i.value="");
}

function upd(i,k,v){
  if(k==="p") data.events[i].p = Math.max(0, data.events[i].p + v);
  if(k==="b") data.events[i].b = Math.max(0, data.events[i].b + v);
  save(); render();
}

function del(i){
  if(confirm("Supprimer cet événement ?")){ data.events.splice(i,1); save(); render(); }
}

// Exemple pré-rempli si vide
if(data.events.length===0){
  data.events.push({date:"Lundi 10 déc 2025 – 11h00",lieu:"Champs de Mars",desc:"Jeux en bois géants",p:18,b:5,t:"Montage, Accueil, Animation, Rangement"});
  save();
}
render();
</script>
</body>
</html>
